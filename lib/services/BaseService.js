var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _config=_interopRequireDefault(require("../utils/config"));var BaseService=function(){function BaseService(endpoint){(0,_classCallCheck2.default)(this,BaseService);this.endpoint=endpoint;}(0,_createClass2.default)(BaseService,[{key:"oldFetch",value:function oldFetch(callback){return fetch(_config.default.WGER_API_PATH+this.endpoint,{method:'GET',headers:{"Authorization":"Token "+_config.default.WGER_API_KEY}}).then(this.processResponse.bind(this)).then(function(responseJson){console.log(responseJson);callback(_config.default.RESPONSE_RECEIVED,responseJson);}).catch(function(error){console.error(error);}).finally(function(){callback(_config.default.API_CALL_COMPLETED);});}},{key:"fetch",value:function(_fetch){function fetch(_x,_x2){return _fetch.apply(this,arguments);}fetch.toString=function(){return _fetch.toString();};return fetch;}(function(request,callback){console.log(request);return fetch(request.url,{method:request.method,headers:{"Authorization":"Token "+_config.default.WGER_API_KEY,"Content-Type":"application/json"},body:request.body}).then(this.processResponse.bind(this)).then(function(responseJson){console.log(responseJson);callback(_config.default.RESPONSE_RECEIVED,responseJson);}).catch(function(error){console.error(error);}).finally(function(){callback(_config.default.API_CALL_COMPLETED);});})},{key:"processResponse",value:function processResponse(response){if(!response.ok)throw new Error("fetching "+_config.default.WGER_API_PATH+this.endpoint+" with status: "+response.status);else return response.json();}}]);return BaseService;}();var _default=BaseService;exports.default=_default;